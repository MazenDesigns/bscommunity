!function(e){e(".sub-menu>a").on("click",function(a){a.preventDefault(),e(this).toggleClass("focused"),e(this).next("nav").slideToggle(400),e(this).children(".toggle").toggleTwoClass("icon-angle-down","icon-angle-up")}),e(".sub-menu>a.checked").next("nav").show(),e(".sub-menu>a.checked").children(".toggle").toggleTwoClass("icon-angle-down","icon-angle-up"),e(".formSubmit").on("click",function(a){a.preventDefault(),e(this).closest("form").submit()}),e("form.ajax").ajaxSubmit(),e("form.ajaxModal").ajaxSubmitWithModal(),e(".page-swapper").on("change",function(){window.location.href=e(this).val()}),e("a.disabled").on("click",function(e){e.preventDefault()}),e(".notifications").one("click",function(){e(this).ajaxRequest({url:"ajax/seeNotifications"})}),e(".normalAJAX").on("click",function(a){a.preventDefault();var t=e(this),n=t.data("content"),l=t.data("url");t.ajaxRequest({url:l,data:n},function(a){a.done?e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400):e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400)})}),e(".edit-category").on("click",function(a){a.preventDefault();var t=e(this),n=t.data("content");t.ajaxRequest({url:"ajax/getCategory",data:n},function(a){if(console.log(a),$panel=e("#edit-category"),a.done){var t=a.done;switch($panel.find("#title").val(t.title),$panel.find("#order").val(t.order),$panel.find("#desc").val(t.desc),$panel.find("#cat_id").val(t.id),Number(t.visibility)){case 2:$panel.find("#membersU").attr("checked","checked");break;case 3:$panel.find("#administrationU").attr("checked","checked");break;default:$panel.find("#allU").attr("checked","checked")}}else $panel.find(".cat-fields").html(a.error)})}),e(".delete-category").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteCategory",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/deleteCategory",data:a},function(a){a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){t.parents(".cat-modal").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".edit-forum").on("click",function(a){a.preventDefault();var t=e(this),n=t.data("content");t.ajaxRequest({url:"ajax/getForum",data:n},function(a){if($panel=e("#edit-forum"),a.done){var t=a.done;$panel.find("#title").val(t.title),$panel.find("#logo").val(t.logo),$panel.find("#desc").val(t.desc),$panel.find("#cat_id").val(t.cat_id),$panel.find("#id").val(t.id)}else $panel.find(".cat-fields").html(a.error)})}),e(".delete-forum").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteForum",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/deleteForum",data:a},function(a){a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){t.parents(".cat-modal").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".delete-user").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteUser",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/deleteUser",data:a},function(a){a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){t.parents(".one-row").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".delete-rule").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteRule",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/deleteRule",data:a},function(a){a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){t.parents(".one-rule").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".delete-role").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteRole",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/deleteRole",data:a},function(a){a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){t.parents(".one-row").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".edit-role").on("click",function(a){a.preventDefault();var t=e(this),n=t.data("content");t.ajaxRequest({url:"ajax/getRole",data:n},function(a){var t=e("#edit-role");if(a.done){var n=a.done,l=e.parseJSON(n.access_json);t.find("#id").val(n.id),t.find("#name_ar").val(n.name_ar),t.find("#name_en").val(n.name_en),e(l).each(function(){t.find("#"+this).attr("checked","checked")})}else t.find(".fields").html(a.error)})}),e(".edit-rule").on("click",function(a){a.preventDefault();var t=e(this),n=t.data("content");t.ajaxRequest({url:"ajax/getRule",data:n},function(a){var t=e("#edit-rule");if(a.done){var n=a.done;t.find("#id").val(n.id),t.find("#title_ar").val(n.title_ar),t.find("#title_en").val(n.title_en),t.find("#description_en").val(n.description_en),t.find("#description_ar").val(n.description_ar)}else t.find(".fields").html(a.error)})}),e(".delete-tickets").on("submit",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("deleteTickets",function(){var a=t.attr("action"),n=t.serialize();t.ajaxRequest({url:a,data:n},function(a){return a.nothing?!1:void(a.done?(e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){e(".ticket.checked").fadeOut(400,function(){e(this).remove()})},3e3)):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3)))})})}),e(".usernameRequest").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxConfirm("approveDecline",function(){var a=t.data("content");t.ajaxRequest({url:"ajax/approveDecline",data:a},function(a){a.done?e(".result-modal").removeClass("fail").addClass("succ").html("<p>"+a.done+"</p>").fadeIn(400).delay(3e3).fadeOut(400):(e(".result-modal").removeClass("succ").addClass("fail").html("<p>"+a.error+"</p>").fadeIn(400).delay(3e3).fadeOut(400),setTimeout(function(){location.reload(!0)},3e3))})})}),e(".change-role").on("click",function(a){a.preventDefault();var t=e(this);t.ajaxRequest({url:"ajax/getUserRole",data:t.data("content")},function(a){if($panel=e("#change-role"),a.done){var t=a.done;$panel.find(".fields").show().next(".no-data").hide().html(),$panel.find("#id").val(a.id),console.log($panel.find("#role"+t.role)),$panel.find("#role"+a.role).attr("selected","selected")}else $panel.find(".fields").hide().next(".no-data").html(a.error).show()})});var a=e(".checkboxTickets").size();e(".checkboxTickets").on("change",function(){if($this=e(this),$this.is(":checked")){$this.parents(".ticket").addClass("checked");var t=0;e(".checkboxTickets").each(function(){return e(this).prop("checked")?(t++,void(t==a&&e(".selectAll").prop("checked",!0))):!1})}else $this.parents(".ticket").removeClass("checked"),e(".selectAll").prop("checked",!1)}),e(".selectAll").on("change",function(){$this=e(this),$this.is(":checked")?(e(".selectAll").prop("checked",!0),e(".checkboxTickets").each(function(){e(this).prop("checked",!0),e(".ticket").addClass("checked")})):(e(".selectAll").prop("checked",!1),e(".checkboxTickets").each(function(){e(this).prop("checked",!1),e(".ticket").removeClass("checked")}))})}(jQuery);